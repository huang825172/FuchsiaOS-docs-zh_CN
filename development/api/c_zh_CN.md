# C 库的可读性规范

这份文档描述了随 Fuchsia SDK 发布的 C 库编写时遵循的规范。

对于 C++ 库的规范，将由另一份文档单独描述。虽然 C++ 基本上可看作 C 的拓展，并对这份文档产生了一些影响，但 C++ 库的编写模式与 C 库的模式有较大的不同。

本文档的大部分内容都在描述一个 C 头文件中的接口。这不是一份完整的 C 代码格式指南，而且也没有太多关于 C 实现文件的内容。这也不是一份文档规范（虽然公共接口应该被完整的文档描述）。

一些 C 库具有与这些规范相矛盾之处。例如，C标准库本身并不遵守这些规范。但在适用的情况下，仍应该遵守本文所述规范。

[TOC]

## 目标

### ABI 稳定性

一些具有稳定 ABI 的 Fuchsia 接口将以 C 库的形式发布。本文档的目标之一就是使 Fuchsia 开发者更简单地进行 ABI 编写及维护。因此，C 语言中的一些可能对 ABI 存在意外或复杂影响的特性，我们建议不要在接口中使用。我们也不允许使用非标准的编译器拓展功能，因为在开发中不能够假设第三方将使用特定的编译器。少量例外情况见下文 DDK 所述。

### 资源管理

本文档的一部分描述了在 C 语言中资源管理的最佳实践。这包括了资源、Zircon 句柄，以及其他任何类型的资源。

### 标准化

我们希望 Fuchsia 的 C 库遵循合理的统一标准。例如尤其重要的命名方案方面。标准化也体现在输出参数的排序方式上。

### FFI 友好

我们同时也关注外部功能接口（FFI）的友好性。许多非 C 语言都具有对 C 接口的支持。这些 FFI 系统的复杂程度各不相同，从简单的 sed 到基于 libclang 的复杂工具。所以在进行设计时，应该对 FFI 友好性的问题有所考虑。

## 语言版本

### C

Fuchsia C 库基于 C11 标准编写（）